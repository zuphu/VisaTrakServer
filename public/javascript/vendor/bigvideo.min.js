!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","videojs","imagesloaded","jquery-ui"],a):a(jQuery,videojs)}(function(a,b){a.BigVideo=function(c){function v(){var b=u.container.width(),c=u.container.height(),d=b/c;u.container.is(a("body"))&&a("html,body").css("height",a(window).height()>a("body").css("height","auto").height()?"100%":"auto"),j>d?"video"===t?(f.width(c*j).height(c),u.shrinkable?a(g).css("top",-(b/j-c)/2).css("left",0).css("height",b/j):a(g).css("top",0).css("left",-(c*j-b)/2).css("height",c),a(g+"_html5_api").css("width",c*j).css("height",c),a(g+"_flash_api").css("width",c*j).css("height",c)):a("#big-video-image").css({width:"auto",height:c,top:0,left:-(c*j-b)/2}):"video"===t?(f.width(b).height(b/j),a(g).css("top",-(b/j-c)/2).css("left",0).css("height",b/j),a(g+"_html5_api").css("width",a(g+"_html5_api").parent().width()+"px").css("height","auto"),a(g+"_flash_api").css("width",b).css("height",b/j)):a("#big-video-image").css({width:b,height:"auto",top:-(b/j-c)/2,left:0})}function w(){var b='<div id="big-video-control-container">';b+='<div id="big-video-control">',b+='<a href="#" id="big-video-control-play"></a>',b+='<div id="big-video-control-middle">',b+='<div id="big-video-control-bar">',b+='<div id="big-video-control-bound-left"></div>',b+='<div id="big-video-control-progress"></div>',b+='<div id="big-video-control-track"></div>',b+='<div id="big-video-control-bound-right"></div>',b+="</div>",b+="</div>",b+='<div id="big-video-control-timer"></div>',b+="</div>",b+="</div>",u.container.append(b),a("#big-video-control-container").css("display","none"),a("#big-video-control-timer").css("display","none"),a("#big-video-control-track").slider({animate:!0,step:.01,slide:function(b,c){n=!0,a("#big-video-control-progress").css("width",c.value-.16+"%"),f.currentTime(c.value/100*f.duration())},stop:function(a,b){n=!1,f.currentTime(b.value/100*f.duration())}}),a("#big-video-control-bar").click(function(b){f.currentTime(b.offsetX/a(this).width()*f.duration())}),a("#big-video-control-play").click(function(a){a.preventDefault(),x("toggle")}),f.on("timeupdate",function(){if(!n&&f.currentTime()/f.duration()){var b=f.currentTime(),c=Math.floor(b/60),d=Math.floor(b)-60*c;10>d&&(d="0"+d);var e=100*(f.currentTime()/f.duration());a("#big-video-control-track").slider("value",e),a("#big-video-control-progress").css("width",e-.16+"%"),a("#big-video-control-timer").text(c+":"+d+"/"+k)}})}function x(b){var c=b||"toggle";"toggle"===c&&(c=o?"pause":"play"),"pause"===c?(f.pause(),a("#big-video-control-play").css("background-position","-16px"),o=!1):"play"===c?(f.play(),a("#big-video-control-play").css("background-position","0"),o=!0):"skip"===c&&z()}function y(){f.play(),u.container.off("click",y)}function z(){s++,s===r.length&&(s=0),A(r[s])}function A(b){a(g).css("display","block"),t="video",f.src(b),o=!0,q?(a("#big-video-control-container").css("display","none"),f.ready(function(){f.volume(0)}),doLoop=!0):(a("#big-video-control-container").css("display","block"),f.ready(function(){f.volume(l)}),doLoop=!1),a("#big-video-image").css("display","none"),a(g).css("display","block")}function B(b){a("#big-video-image").remove(),f.pause(),a(g).css("display","none"),a("#big-video-control-container").css("display","none"),t="image";var c=a('<img id="big-video-image" src='+b+" />");h.append(c),a("#big-video-image").imagesLoaded(function(){j=a("#big-video-image").width()/a("#big-video-image").height(),v()})}var f,s,t,d={useFlashForFirefox:!0,forceAutoplay:!1,controls:!1,doLoop:!1,container:a("body"),shrinkable:!1},e=this,g="#big-video-vid",h=a('<div id="big-video-wrap"></div>'),j=(a(""),16/9),k=0,l=.8,m=!1,n=!1,o=!1,p=!1,q=!1,r=[],u=a.extend({},d,c);e.init=function(){if(!m){u.container.prepend(h);var c=u.forceAutoplay?"autoplay":"";f=a('<video id="'+g.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+c+" webkit-playsinline></video>"),f.css("position","absolute"),h.append(f);var d=["html5","flash"],e=navigator.userAgent.toLowerCase(),i=-1!=e.indexOf("firefox");u.useFlashForFirefox&&i&&(d=["flash","html5"]),f=b(g.substr(1),{controls:!1,autoplay:!0,preload:"auto",techOrder:d}),u.controls&&w(),v(),m=!0,o=!1,u.forceAutoplay&&a("body").on("click",y),a("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%"),a(window).on("resize.bigvideo",function(){v()}),f.on("loadedmetadata",function(){j=document.getElementById("big-video-vid_flash_api")?document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):a("#big-video-vid_html5_api").prop("videoWidth")/a("#big-video-vid_html5_api").prop("videoHeight"),v();var c=Math.round(f.duration()),d=Math.floor(c/60),e=c-60*d;10>e&&(e="0"+e),k=d+":"+e}),f.on("ended",function(){u.doLoop&&(f.currentTime(0),f.play()),p&&z()})}},e.show=function(a,b){if(void 0===b&&(b={}),q=b.ambient===!0,(q||b.doLoop)&&(u.doLoop=!0),"string"==typeof a){var c=a.substring(a.lastIndexOf(".")+1);"jpg"===c||"gif"===c||"png"===c?B(a):(b.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(a=b.altSource),A(a),b.onShown&&b.onShown(),p=!1)}else r=a,s=0,A(r[s]),b.onShown&&b.onShown(),p=!0},e.getPlayer=function(){return f},e.remove=e.dispose=function(){m=!1,h.remove(),a(window).off("resize.bigvideo"),f&&(f.off("loadedmetadata"),f.off("ended"),f.dispose())},e.triggerPlayer=function(a){x(a)}}});